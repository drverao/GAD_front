<div class="p-card">
    <h2 class="crear-modelo">NUEVO MODELO</h2>
    <p-toast></p-toast>
    <p-steps [model]="items" [readonly]="false" [activeIndex]="activeIndex"
        (activeIndexChange)="onActiveIndexChange($event)"></p-steps>

<!-- Paso 1-->
<div *ngIf="activeIndex === 0">
    <form>
        <div class="form first">
            <div class="details personal">
                    <div class="fields">
                    <div class=" nombre">
                        <label for="nombre" class="p-label-lg">Nombre</label>
                        <input type="text" pInputText />
                    </div>
                    <div class="input-field">
                        <label for="fechaInicial" class="p-label-lg">Fecha Inicial</label>
                        <p-calendar id="fechaInicial" placeholder="Fecha inicial"></p-calendar>
                    </div>
                    <div class="input-field">
                        <label for="fechaFinal" class="p-label-lg">Fecha Final</label>
                        <p-calendar id="fechaFinal" placeholder="Fecha final"></p-calendar>
                    </div>
                    <div class="input-field">
                        <label for="fechaActividades" class="p-label-lg">Fecha de Actividades</label>
                        <p-calendar id="fechaActividades" placeholder="Fecha de actividades"></p-calendar>
                     </div>
  
               </div>
            </div>
        </div>
    </form>
</div>


    <!-- Paso 2-->
    <div *ngIf="activeIndex === 1">
        <div class="b-abrirmodal">
        <p-button (click)="showDialog()" icon="pi pi-external-link" label="Añadir Criterio"></p-button></div>
        <p-dialog header="Listado Criterios" [(visible)]="visible" [modal]="true" [style]="{ width: '50vw' }"
            [draggable]="false" [resizable]="false">
            <div class="card flex justify-content-center">
                <p-accordion class="w-full" (onOpen)="onAccordionTabOpen($event)">
                    <ng-container *ngFor="let criterio of Criterios">
                        <p-accordionTab>
                            <ng-template pTemplate="header">
                                <div class="flex align-items-center">
                                    <i class="pi pi-calendar mr-2"></i>
                                    <span class="vertical-align-middle">{{ criterio.nombre }}</span>
                                </div>
                            </ng-template>
                            <ng-template pTemplate="content">
                                <!---SUBCRITERIOS-->
                                 <h3>SUBCRITERIOS</h3>
                                <p-accordion class="w-full" (onOpen)="onAccordionTabOpenSubCri($event)" >
                                    <ng-container *ngFor="let subcriterio of SubCriterios">
                                        <p-accordionTab>
                                            <ng-template pTemplate="header">
                                                <div class="flex align-items-center">
                                                    <i class="pi pi-calendar mr-2"></i>
                                                    <span class="vertical-align-middle">{{ subcriterio.nombre }}</span>
                                                </div>
                                            </ng-template>
                                            <ng-template pTemplate="content">
                                                 <!--- INDICADORES -->
                                                <h3>INDICADORES</h3>
                                                <div class="card flex justify-content-center">
                                                    <div class="flex flex-column gap-2">
                                                        <div *ngFor="let indicador of Indicadores" class="field-checkbox">
                                                            <p-checkbox name="group" [value]="indicador" [(ngModel)]="IndicadoresSeleccionados" [inputId]=" indicador.id_indicador"></p-checkbox>
                                                            <label [for]="indicador.id_indicador">{{ indicador.nombre }}</label>
                                                        </div>
                                                    </div>
                                                </div>
                                            </ng-template>
                                        </p-accordionTab>
                                    </ng-container>
                                </p-accordion>
                            </ng-template>
                        </p-accordionTab>
                    </ng-container>
                </p-accordion>
            </div>
            <div class="b-Modal">
            <p-button label="OK" styleClass="p-button-success" (click)=" IndicadoresSelected()"  icon="pi pi-check-circle " ></p-button>
            <p-button label="CANCELAR" styleClass="p-button-danger" (click)="  CancelarModal()" ></p-button>
        </div>
        </p-dialog>

         <!-- Tabla de los Indicadores -->
        <div class="indica-table">
        <p-table [value]="IndicadoresSeleccionados" [paginator]="true" [rows]="5">
        <ng-template pTemplate="header">
              <tr>
                <th>Nombre Indicadores</th>
                <th>Descripción</th>
              
              </tr>
            </ng-template>
            <ng-template pTemplate="body" let-indicador>
              <tr>
                <td class="s-centrar">{{ indicador.nombre }}</td>
                <td class="n-centrar">{{ indicador.descripcion }}</td>
              </tr>
            </ng-template>
          </p-table>
        </div>
    </div>




    <!-- Paso 3--->
    <div *ngIf="activeIndex === 2">
        Contenido del último paso
    </div>
    <div class="b-buttons">
        <div class="b-siguiente">
            <p-button label="Siguiente" icon="pi pi-arrow-circle-right" (click)="goNext()" *ngIf="activeIndex < items.length - 1"   ></p-button>
        </div>
        <div  *ngIf="activeIndex > 0" class="b-regresar">
            <p-button label="Regresar" icon="pi pi-arrow-circle-left" (click)="goBack()" [disabled]="activeIndex === 0"></p-button>
        </div>
        <div *ngIf="activeIndex === 2 " class="b-guardar">
            <p-button label="Guardar" styleClass="p-button-success"   (onClick)="save()" icon="pi pi-save" ></p-button>
        </div>
        <div class="b-cancelar">
            <p-button label="Cancelar" styleClass="p-button-danger" (click)="Cancelar()"></p-button>
        </div>
    </div>
</div>